<div class="d-flex flex-row">
  <div class="flex-row-auto offcanvas-mobile w-200px w-xxl-275px">
    <div class="card card-custom card-stretch">
      <div class="card-body px-5">
        <div class="navi-section mb-2 font-size-h6 font-weight-bold pb-0 d-flex">
          <span>{{ 'TITLE.filter' | translate }}</span>
          <i class="flaticon2-console ml-auto"></i>
        </div>
        <div class="navi navi-hover navi-active navi-link-rounded navi-bold navi-icon-center navi-light-icon">
          <!--begin:Item-->
          <div *ngFor="let item of typeData" class="navi-item my-2">
            <a (click)="onSelectType(item.name)" [ngClass]="{'active': item.name === type}" href="#" class="navi-link">
              <span class="navi-text font-weight-bolder font-size-lg">
                {{ 'RESPONSE.' + item.name | translate }}
              </span>
            </a>
          </div>
          <!--end:Item-->
        </div>
      </div>
    </div>
  </div>
  <div class="flex-row-fluid ml-lg-8" *ngIf="user$ | async as user">
    <div class="card card-custom gutter-b mb-0">
      <div class="card-header">
        <div class="card-title">
          <h3 class="card-label">{{ 'TITLE.tasks_list' | translate }}</h3>
        </div>
      </div>
      <div class="card-body">
        <!-- begin:Table -->
        <div class="table-responsive angular-bootstrap-table">
          <table
                  class="table table-head-custom table-vertical-center overflow-hidden"
          >
            <thead>
            <th>
              {{ 'TABLE.title' | translate }}
            </th>
            <th class="text-center" [style.width.px]="100">
              {{ 'TABLE.receive' | translate }}
            </th>
            <th class="text-center" [style.width.px]="100">
              {{ 'TABLE.remaining' | translate }}
            </th>
            <th class="text-center" [style.width.px]="100">
              {{ 'TABLE.status' | translate }}
            </th>
            <th [style.width.px]="100">
              {{ 'TABLE.date' | translate }}
            </th>
            <th [style.width.px]="160">
              {{ 'TABLE.actions' | translate }}
            </th>
            </thead>
            <tbody>
            <tr *ngFor="let task of this.data$ | async">
              <td>
                <a href="{{ task.link }}" target="_blank">
                  {{ task.name }}
                </a>
              </td>
              <td class="text-center">{{ task.receive || 0 }}</td>
              <td class="text-center">{{ task.remain }}/{{ task.budget || 0 }}</td>
              <td class="text-center">
                        <span
                                class="label label-lg label-inline"
                                [class.label-light-primary]="task.status === 0"
                                [class.label-light-success]="task.status === 1"
                                [class.label-mute]="task.status === 2"
                        >
                        <ng-container *ngIf="task.status === 0">{{ 'STATUS.open' | translate }}</ng-container>
                        <ng-container *ngIf="task.status === 1">{{ 'STATUS.shared' | translate }}</ng-container>
                        <ng-container *ngIf="task.status === 2">{{ 'STATUS.closed' | translate }}</ng-container>
                      </span>
              </td>
              <td>{{ task.created_at | date: 'dd/MM/yyyy' }}</td>
              <td>
                <a *ngIf="task.action_type === 'share_post';else templateButtonAction"
                   shareButton="facebook" [url]="task.link + '?utm_source=FanLike&utm_medium=' + user.hash_id"
                   class="btn btn-primary"
                   (click)="saveAction(task)">{{ 'RESPONSE.' + task.action_type | translate }}</a>
                <ng-template #templateButtonAction>
                  <a [href]="task.link + '?utm_source=FanLike&utm_medium=' + user.hash_id"
                     target="_blank"
                     class="btn btn-primary" (click)="saveAction(task)">
                    {{ 'RESPONSE.' + task.action_type | translate }}
                  </a>
                </ng-template>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
        <!-- end: Table -->
        <app-paginator *ngIf="pagination$ | async as pagination"
                       class="d-flex justify-content-between align-items-center flex-wrap"
                       [paginator]="pagination"
                       [isLoading]="isLoading" (paginate)="paginate($event)"></app-paginator>
      </div>
    </div>
  </div>
</div>

