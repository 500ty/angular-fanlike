(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{PXP5:function(t,e,a){"use strict";a.r(e),a.d(e,"TaskModule",function(){return nt});var n=a("ofXK"),c=a("tyNb"),i=a("mrSG"),o=a("VRyK"),s=a("LRne"),r=a("90At"),l=a("M9IT"),b=a("Dh3D"),m=a("JX91"),p=a("eIep"),u=a("lJxs"),g=a("JIr8"),d=a("fXoL"),f=a("qc5V"),h=a("2Vo4"),O=a("vkgz");let _=(()=>{class t{constructor(t){this.api=t,this.dataSource=new h.a(null),this.data$=this.dataSource.asObservable(),this.paginationSource=new h.a(null),this.pagination$=this.paginationSource.asObservable()}getData(t="created_at ",e="desc",a=0,n=10){return console.log(t,e,a),this.api.get(`/articles?page=${a+1}&per_page=${n}&filters[${t}][sorting]=${e}`)}fetch(t,e="created_at ",a="desc",n=0,c=30){let i;switch(t){case"share_link":i=`/articles?page=${n+1}&per_page=${c}&filters[${e}][sorting]=${a}`;break;case"join_group":i=`/fbgroups?page=${n+1}&per_page=${c}&filters[${e}][sorting]=${a}`;break;case"like_page":i=`/fbpages?page=${n+1}&per_page=${c}&filters[${e}][sorting]=${a}`;break;case"interaction_post":i=`/fbposts?page=${n+1}&per_page=${c}&filters[${e}][sorting]=${a}`}return this.api.get(i).pipe(Object(O.a)(t=>{this.dataSource.next(t.data);const e=Object.assign(Object.assign({},t.meta.pagination),{page:t.meta.pagination.current_page,pageSize:t.meta.pagination.per_page});this.paginationSource.next(e)}))}shareArticle(t){return this.api.get(`/articles?page=${t}`).pipe(Object(O.a)(t=>{this.dataSource.next(t.data),this.paginationSource.next(t.meta.pagination)}))}joinGroup(t){return this.api.get(`/fbgroups?page=${t}`).pipe(Object(O.a)(t=>{this.dataSource.next(t.data),this.paginationSource.next(t.meta.pagination)}))}}return t.\u0275fac=function(e){return new(e||t)(d.fc(f.a))},t.\u0275prov=d.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var C=a("tmEo"),P=a("tH/4"),w=a("+0xr"),v=a("Xa2L"),M=a("iQdX"),y=a("sYmb");const L=function(t){return{active:t}};function S(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",9),d.Yb(1,"a",10),d.ic("click",function(){d.Cc(t);const a=e.$implicit;return d.mc().onSelectType(a.name)}),d.Yb(2,"span",11),d.Nc(3),d.nc(4,"translate"),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=e.$implicit,a=d.mc();d.Fb(1),d.sc("ngClass",d.wc(4,L,t.name===a.type)),d.Fb(2),d.Pc(" ",d.oc(4,2,"RESPONSE."+t.name)," ")}}function X(t,e){1&t&&d.Tb(0,"mat-spinner")}function k(t,e){if(1&t&&(d.Yb(0,"div",34),d.Lc(1,X,1,0,"mat-spinner",35),d.Xb()),2&t){const t=d.mc(2);d.Fb(1),d.sc("ngIf",t.isLoadingResults)}}function x(t,e){1&t&&(d.Yb(0,"mat-header-cell"),d.Nc(1),d.nc(2,"translate"),d.Xb()),2&t&&(d.Fb(1),d.Pc(" ",d.oc(2,1,"TABLE.title")," "))}function F(t,e){if(1&t&&(d.Yb(0,"mat-cell"),d.Yb(1,"span",36),d.Nc(2),d.nc(3,"translate"),d.Xb(),d.Yb(4,"a",37),d.Nc(5),d.Xb(),d.Xb()),2&t){const t=e.$implicit;d.Fb(2),d.Oc(d.oc(3,3,"TABLE.title")),d.Fb(2),d.tc("href",t.link,d.Ec),d.Fb(1),d.Pc(" ",t.name," ")}}function Y(t,e){1&t&&(d.Yb(0,"mat-header-cell"),d.Nc(1),d.nc(2,"translate"),d.Xb()),2&t&&(d.Fb(1),d.Pc(" ",d.oc(2,1,"TABLE.receive")," "))}function $(t,e){if(1&t&&(d.Yb(0,"mat-cell"),d.Yb(1,"span",36),d.Nc(2),d.nc(3,"translate"),d.Xb(),d.Yb(4,"span"),d.Nc(5),d.Tb(6,"img",38),d.Xb(),d.Xb()),2&t){const t=e.$implicit;d.Fb(2),d.Oc(d.oc(3,2,"TABLE.receive")),d.Fb(3),d.Pc(" ",t.receive," ")}}function T(t,e){1&t&&(d.Yb(0,"mat-header-cell"),d.Nc(1),d.nc(2,"translate"),d.Xb()),2&t&&(d.Fb(1),d.Oc(d.oc(2,1,"TABLE.remaining")))}function N(t,e){if(1&t&&(d.Yb(0,"mat-cell"),d.Yb(1,"span",36),d.Nc(2),d.nc(3,"translate"),d.Xb(),d.Nc(4),d.Xb()),2&t){const t=e.$implicit;d.Fb(2),d.Oc(d.oc(3,3,"TABLE.remaining")),d.Fb(2),d.Qc(" ",t.remain,"/",t.budget||0," ")}}function j(t,e){1&t&&(d.Yb(0,"mat-header-cell"),d.Nc(1),d.nc(2,"translate"),d.Xb()),2&t&&(d.Fb(1),d.Pc(" ",d.oc(2,1,"TABLE.status")," "))}function A(t,e){1&t&&(d.Wb(0),d.Nc(1),d.nc(2,"translate"),d.Vb()),2&t&&(d.Fb(1),d.Oc(d.oc(2,1,"STATUS.open")))}function E(t,e){1&t&&(d.Wb(0),d.Nc(1),d.nc(2,"translate"),d.Vb()),2&t&&(d.Fb(1),d.Oc(d.oc(2,1,"STATUS.done")))}function I(t,e){1&t&&(d.Wb(0),d.Nc(1),d.nc(2,"translate"),d.Vb()),2&t&&(d.Fb(1),d.Oc(d.oc(2,1,"STATUS.closed")))}function D(t,e){if(1&t&&(d.Yb(0,"mat-cell"),d.Yb(1,"span",36),d.Nc(2),d.nc(3,"translate"),d.Xb(),d.Yb(4,"span",39),d.Lc(5,A,3,3,"ng-container",35),d.Lc(6,E,3,3,"ng-container",35),d.Lc(7,I,3,3,"ng-container",35),d.Xb(),d.Xb()),2&t){const t=e.$implicit;d.Fb(2),d.Oc(d.oc(3,10,"TABLE.status")),d.Fb(2),d.Kb("label-light-primary",0===t.status)("label-light-success",1===t.status)("label-mute",2===t.status),d.Fb(1),d.sc("ngIf",0==t.status),d.Fb(1),d.sc("ngIf",1==t.status),d.Fb(1),d.sc("ngIf",2==t.status)}}function R(t,e){1&t&&(d.Yb(0,"mat-header-cell",40),d.Nc(1),d.nc(2,"translate"),d.Xb()),2&t&&(d.Fb(1),d.Oc(d.oc(2,1,"TABLE.date")))}function B(t,e){if(1&t&&(d.Yb(0,"mat-cell"),d.Yb(1,"span",36),d.Nc(2),d.nc(3,"translate"),d.Xb(),d.Nc(4),d.nc(5,"date"),d.Xb()),2&t){const t=e.$implicit;d.Fb(2),d.Oc(d.oc(3,2,"TABLE.date")),d.Fb(2),d.Pc(" ",d.pc(5,4,t.created_at,"dd/MM/yyyy")," ")}}function z(t,e){1&t&&(d.Yb(0,"mat-header-cell"),d.Nc(1),d.nc(2,"translate"),d.Xb()),2&t&&(d.Fb(1),d.Oc(d.oc(2,1,"TABLE.actions")))}function V(t,e){if(1&t){const t=d.Zb();d.Yb(0,"a",43),d.ic("click",function(){d.Cc(t);const e=d.mc().$implicit;return d.mc(2).saveAction(e)}),d.Nc(1),d.nc(2,"translate"),d.Xb()}if(2&t){const t=d.mc().$implicit,e=d.mc().ngIf;d.sc("url",t.link+"?utm_source=FanLike&utm_medium="+e.hash_id),d.Fb(1),d.Oc(d.oc(2,2,"RESPONSE."+t.action_type))}}function W(t,e){if(1&t){const t=d.Zb();d.Yb(0,"a",44),d.ic("click",function(){d.Cc(t);const e=d.mc().$implicit;return d.mc(2).saveAction(e)}),d.Nc(1),d.nc(2,"translate"),d.Xb()}if(2&t){const t=d.mc().$implicit,e=d.mc().ngIf;d.sc("href",t.link+"?utm_source=FanLike&utm_medium="+e.hash_id,d.Ec),d.Fb(1),d.Pc(" ",d.oc(2,2,"RESPONSE."+t.action_type)," ")}}function H(t,e){if(1&t&&(d.Yb(0,"mat-cell"),d.Yb(1,"span",36),d.Nc(2),d.nc(3,"translate"),d.Xb(),d.Lc(4,V,3,4,"a",41),d.Lc(5,W,3,4,"ng-template",null,42,d.Mc),d.Xb()),2&t){const t=e.$implicit,a=d.Ac(6);d.Fb(2),d.Oc(d.oc(3,3,"TABLE.actions")),d.Fb(2),d.sc("ngIf","share_post"===t.action_type)("ngIfElse",a)}}function J(t,e){1&t&&d.Tb(0,"mat-header-row")}function Q(t,e){1&t&&d.Tb(0,"mat-row")}function U(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",12),d.Yb(1,"div",13),d.Yb(2,"div",14),d.Yb(3,"div",15),d.Yb(4,"h3",16),d.Nc(5),d.nc(6,"translate"),d.Xb(),d.Xb(),d.Xb(),d.Yb(7,"div",17),d.Yb(8,"div",18),d.Lc(9,k,2,1,"div",19),d.Yb(10,"div",20),d.Yb(11,"mat-table",21),d.ic("matSortChange",function(){return d.Cc(t),d.mc().resetPaging()}),d.Wb(12,22),d.Lc(13,x,3,3,"mat-header-cell",23),d.Lc(14,F,6,5,"mat-cell",24),d.Vb(),d.Wb(15,25),d.Lc(16,Y,3,3,"mat-header-cell",23),d.Lc(17,$,7,4,"mat-cell",24),d.Vb(),d.Wb(18,26),d.Lc(19,T,3,3,"mat-header-cell",23),d.Lc(20,N,5,5,"mat-cell",24),d.Vb(),d.Wb(21,27),d.Lc(22,j,3,3,"mat-header-cell",23),d.Lc(23,D,8,12,"mat-cell",24),d.Vb(),d.Wb(24,28),d.Lc(25,R,3,3,"mat-header-cell",29),d.Lc(26,B,6,7,"mat-cell",24),d.Vb(),d.Wb(27,30),d.Lc(28,z,3,3,"mat-header-cell",23),d.Lc(29,H,7,5,"mat-cell",24),d.Vb(),d.Lc(30,J,1,0,"mat-header-row",31),d.Lc(31,Q,1,0,"mat-row",32),d.Xb(),d.Xb(),d.Tb(32,"mat-paginator",33),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(5),d.Oc(d.oc(6,7,"TITLE.tasks_list")),d.Fb(4),d.sc("ngIf",t.isLoadingResults||t.isRateLimitReached),d.Fb(2),d.sc("dataSource",t.task$),d.Fb(19),d.sc("matHeaderRowDef",t.displayedColumns),d.Fb(1),d.sc("matRowDefColumns",t.displayedColumns),d.Fb(1),d.sc("length",t.resultsLength)("pageSize",t.pageSize)}}const Z=[{path:"",component:(()=>{class t{constructor(t,e,a){this.apiService=t,this.taskService=e,this.auth=a,this.type="interaction_post",this.currentPage=1,this.pageSize=r.a.table.rows,this.typeData=[{name:"interaction_post"},{name:"join_group"},{name:"like_page"}],this.displayedColumns=["name","receive","remain","status","created_at","actionsCol"],this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.user$=this.auth.currentUserSubject.asObservable()}ngOnInit(){}ngAfterViewInit(){this.getData()}resetPaging(){this.matPaginator.pageIndex=0}getData(){this.task$=Object(o.a)(this.sort.sortChange,this.matPaginator.page).pipe(Object(m.a)({}),Object(p.a)(()=>(this.isLoadingResults=!0,this.taskService.fetch(this.type,this.sort.active,this.sort.direction,this.matPaginator.pageIndex,this.pageSize))),Object(u.a)(t=>(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=t.meta.pagination.total,t.data)),Object(g.a)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,Object(s.a)([]))))}onSelectType(t){return Object(i.a)(this,void 0,void 0,function*(){this.type!==t&&(this.type=t,this.resetPaging(),this.getData())})}saveAction(t){return Object(i.a)(this,void 0,void 0,function*(){try{const e={item_type:t.type,item_id:t.hash_id,type:t.action_type},a=yield this.apiService.post("/histories",e).toPromise();console.log(a)}catch(e){console.log(e)}})}}return t.\u0275fac=function(e){return new(e||t)(d.Sb(f.a),d.Sb(_),d.Sb(C.a))},t.\u0275cmp=d.Mb({type:t,selectors:[["app-task"]],viewQuery:function(t,e){if(1&t&&(d.Sc(l.a,!0),d.Sc(b.a,!0)),2&t){let t;d.zc(t=d.jc())&&(e.matPaginator=t.first),d.zc(t=d.jc())&&(e.sort=t.first)}},decls:13,vars:7,consts:[[1,"d-xl-flex","flex-row"],[1,"flex-row-auto","w-xxl-275px","mb-5"],[1,"card","card-custom","card-stretch"],[1,"card-body","px-5"],[1,"navi-section","mb-2","font-size-h6","font-weight-bold","pb-0","d-flex"],[1,"flaticon2-console","ml-auto"],[1,"navi","navi-hover","navi-active","navi-link-rounded","navi-bold","navi-icon-center","navi-light-icon"],["class","navi-item my-2",4,"ngFor","ngForOf"],["class","flex-row-fluid ml-xl-8",4,"ngIf"],[1,"navi-item","my-2"],["href","#",1,"navi-link",3,"ngClass","click"],[1,"navi-text","font-weight-bolder","font-size-lg"],[1,"flex-row-fluid","ml-xl-8"],[1,"card","card-custom","gutter-b","mb-0"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-body","p-0"],[1,"custom-table-wrap","custom-table-wrap-task"],["class","custom-table-loading-shade",4,"ngIf"],[1,"custom-table-container"],["matSort","","matSortActive","created_at","matSortDisableClear","","matSortDirection","desc",1,"custom-table",3,"dataSource","matSortChange"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","receive"],["matColumnDef","remain"],["matColumnDef","status"],["matColumnDef","created_at"],["mat-sort-header","","disableClear","",4,"matHeaderCellDef"],["matColumnDef","actionsCol"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"custom-table-loading-shade"],[4,"ngIf"],[1,"mb-mat-header-cell"],["target","_blank",3,"href"],["width","18","src","./assets/media/svg/customs/coin.svg","alt",""],[1,"label","label-lg","label-inline"],["mat-sort-header","","disableClear",""],["shareButton","facebook","class","btn btn-primary",3,"url","click",4,"ngIf","ngIfElse"],["templateButtonAction",""],["shareButton","facebook",1,"btn","btn-primary",3,"url","click"],["target","_blank",1,"btn","btn-primary",3,"href","click"]],template:function(t,e){1&t&&(d.Yb(0,"div",0),d.Yb(1,"div",1),d.Yb(2,"div",2),d.Yb(3,"div",3),d.Yb(4,"div",4),d.Yb(5,"span"),d.Nc(6),d.nc(7,"translate"),d.Xb(),d.Tb(8,"i",5),d.Xb(),d.Yb(9,"div",6),d.Lc(10,S,5,6,"div",7),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Lc(11,U,33,9,"div",8),d.nc(12,"async"),d.Xb()),2&t&&(d.Fb(6),d.Oc(d.oc(7,3,"TITLE.filter")),d.Fb(4),d.sc("ngForOf",e.typeData),d.Fb(1),d.sc("ngIf",d.oc(12,5,e.user$)))},directives:[n.m,n.n,P.a,n.l,w.j,b.a,w.c,w.e,w.b,w.g,w.i,l.a,v.c,w.d,w.a,b.b,M.a,w.f,w.h],pipes:[y.c,n.b,n.e],styles:['.custom-table-wrap[_ngcontent-%COMP%]{position:relative}.custom-table-wrap[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:first-of-type, .custom-table-wrap[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:first-of-type, .custom-table-wrap[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:.75rem}.custom-table-wrap[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{font-weight:600;color:#b5b5c3!important;font-size:.9rem;text-transform:uppercase;letter-spacing:.1rem}.custom-table-wrap[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]{font-family:Open Sans,Helvetica,"sans-serif";font-size:13px}.custom-table-wrap[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%], .custom-table-wrap[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   .mat-footer-cell[_ngcontent-%COMP%]{font-size:13px}.custom-table-wrap[_ngcontent-%COMP%]   .custom-table-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.custom-table-wrap[_ngcontent-%COMP%]   .mb-mat-header-cell[_ngcontent-%COMP%]{display:none}.custom-table-wrap[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:.75rem}@media (max-width:1199.98px){.custom-table-wrap[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]{display:none}.custom-table-wrap[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]{border:0;vertical-align:middle;background-color:transparent}.custom-table-wrap[_ngcontent-%COMP%]   mat-footer-row[_ngcontent-%COMP%]:after, .custom-table-wrap[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]:after, .custom-table-wrap[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]:after{display:none}.custom-table-wrap[_ngcontent-%COMP%]   .mb-mat-header-cell[_ngcontent-%COMP%]{display:block;margin-right:auto;width:120px}.custom-table-wrap[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{flex-direction:column;margin-bottom:10px;border-bottom:5px solid #ddd}.custom-table-wrap[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{display:flex;width:100%}.custom-table-wrap[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #ddd}}@media (min-width:1200px){.custom-table-wrap-task[_ngcontent-%COMP%]   .mat-column-receive[_ngcontent-%COMP%], .custom-table-wrap-task[_ngcontent-%COMP%]   .mat-column-remain[_ngcontent-%COMP%]{flex:0 0 100px;justify-content:center}.custom-table-wrap-task[_ngcontent-%COMP%]   .mat-column-created_at[_ngcontent-%COMP%], .custom-table-wrap-task[_ngcontent-%COMP%]   .mat-column-status[_ngcontent-%COMP%]{flex:0 0 120px;justify-content:center}.custom-table-wrap-task[_ngcontent-%COMP%]   .mat-column-actionsCol[_ngcontent-%COMP%]{flex:0 0 160px;justify-content:center}}']}),t})()}];let K=(()=>{class t{}return t.\u0275mod=d.Qb({type:t}),t.\u0275inj=d.Pb({factory:function(e){return new(e||t)},imports:[[c.k.forChild(Z)],c.k]}),t})();var G=a("Br0f"),q=a("3Pt+"),tt=a("e8Ap"),et=a("PCNd"),at=a("tM0M");let nt=(()=>{class t{}return t.\u0275mod=d.Qb({type:t}),t.\u0275inj=d.Pb({factory:function(e){return new(e||t)},imports:[[n.c,K,G.a,q.t,tt.b,M.b,et.a,at.a,w.l,v.b,l.b,b.c]]}),t})()}}]);